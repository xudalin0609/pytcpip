TAP/TUN 设备是一种让用户态和内核之间进行数据交换的虚拟设备，TAP 工作在二层，TUN 工作在三层，TAP/TUN 网卡的两头分别是内核网络协议栈和用户层,其作用是将协议栈中的部分数据包转发给用户空间的应用程序，给用户空间的程序一个处理数据包的机会。当我们想在 linux 中创建一个 TAP 设备时，其实很容易，像普通文件一样打开字符设备/dev/net/tun可以得到一个文件描述符，接着用系统调用 ioctl 将文件描述符和 kernel 的 tap 驱动绑定在一起，那么之后对该文件描述符的读写就是对虚拟网卡 TAP 的读写。
```
+----------------------+
|  userland netstack   |
+----------------------+
|         tap          |
+----------------------+
|       kernel         |
+----------------------+
```